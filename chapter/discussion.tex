\chapter{Discussion}
    %This section covers the key findings from the results and their implications..
    
    In this thesis, an approach to find the subset of frequencies most applicable to classify sandeel in acoustic data has been implemented to advise how to equip smaller unmanned vessels. The results in figure  \ref{increasing_freq_f1_score_fig} illustrate the best performing combination of frequencies per subset size and would act as advice for vessels that are to be equipped  with a subset of echo sounders using the frequencies tested. After the subset size of three, the performance does not increase significantly for larger subsets in F1-score. The recall is the most significant part of the F1-score, which implies that finding instances of possible sandeel in the data requires fewer frequencies than accurately classifying it, which is to be expected as the latter is likely a more complex task requiring additional information. 
    
    % This was done by training a series of models with the same architecture on labels produced by an already existing acoustic sandeel classifier, where each model had different subsets of the frequencies available during training.
    
    
    %The figures \ref{increasing_freq_f1_score_fig} (F1-score), \ref{increasing_freq_precision_score_fig} (precision), \ref{increasing_freq_recall_score_fig} (recall) can all be used to select frequencies for surveys depending on the nature of the task.


    The unique performance of the subset containing \textit{18kHz}, \textit{38kHz}, and \textit{200kHz}, depicted in figures \ref{increasing_freq_f1_score_fig} and \ref{errorbar_fig}, supports the current methods applied by the \gls{imr} described in section \ref{acoustic classification sandeel}, where the same frequencies are important for the classifications (\textit{18kHz} and \textit{38kHz}) and delineation (\textit{200kHz}) of sandeel schools. However, our results cannot tell \textit{how} and in \textit{what magnitude} each of the frequencies contributes to the classification process for this subset, a clear possibility for future work. The \textit{200kHz} channel is present in all subsets in figure \ref{increasing_freq_f1_score_fig}, and for the subsets size of two, the \textit{70kHz}  is chosen over both \textit{18kHz} and \textit{38kHz}\footnote{Although with a small margin to the other subsets at subset size two as described in appendix \ref{test_per_freq_f1_appendix}.}. This suggests a significant positive synergy between the two latter frequencies and 200kHz as they outperform all other subsets at size three. Furthermore, figure \ref{with_without_figure} shows that the unique subset of three (\textit{\textit{18kHz}, \textit{38kHz}, and \textit{200kHz}}) is part of all the highest performing subsets, and a sharp drop in performance can be seen if they are not all present in a subset. This leads to the proposition that vessels equipped with three or more echo sounders should include \textit{18kHz}, \textit{38kHz}, and \textit{200kHz} as a minimum. 


    %All our best subsets after, and including, three frequencies, compares to the performance they achieved on all but two years (\textit{2009 and 2018}). ---- 
    %This may be valid for the unique subset of three frequencies mentioned in the paragraph above.
    
    %The choice of using the output from \citeauthor{brautaset2020acoustic} model as pseudo labels likely made our model inherit the same strengths and weaknesses of their model. The performance of the work in this thesis would likely never surpass, just approach that of the model from \citeauthor{brautaset2020acoustic}. Furthermore, generalizability was likely reduced by the amount of data used during our experiments and was restricted because of little computational power. In the works of \citeauthor{brautaset2020acoustic}, they utilized a total of 12 years, while our work only used data from two years (2018 and 2019). On entire echograms, their highest F1-score was 0.78 in 2018 (\textit{our test dataset}), and our best subsets resulted in a mean performance of 0.67.
    
    The generalizability of this work was likely reduced by the amount of data used during the exhaustive search and was restricted because of little computational power. In the works of \citeauthor{brautaset2020acoustic}, they utilized a total of 12 years, while this work only used data from two years (\textit{2018 and 2019}). On entire echograms, their highest F1-score was 0.78 in 2018 (\textit{our test dataset}), while the best subsets in this thesis resulted in a mean performance of 0.67. The performance achieved by the models in this work showed that some could generalize from 2019 to 2018 on a much smaller training dataset than used in \citet{brautaset2020acoustic}. The results from \citeauthor{brautaset2020acoustic} may indicate that the quality of the data itself increased in the more recent years. As the data quality is crucial for the model, this may indicate that acoustic classifiers can be successfully trained using far fewer quantities of high-quality data. This assumes that the data contained in the 2019 dataset is high-quality, which is hard for us to evaluate. Meanwhile, more data will likely make the classifier more robust to noise. Future work should retrain and test our model on the same years and amounts of data described in \citeauthor{brautaset2020acoustic} to establish a more comprehensive comparison.  
    
    
    The original annotations belonging to the acoustic data were unavailable during this thesis; thus the solution became \gls{kd} applied through pseudo labels. This was considered befitting, as the objective of this task was not to train a better model but assess which frequencies explain the performance achieved by the state-of-the-art baseline model created by \citet{brautaset2020acoustic}. The teacher-student approach was justified by the solid performance shown by the baseline model, especially on the year 2018. Thus, the pseudo label would likely sufficiently capture the baseline model's use of the frequencies, and new models trained using the pseudo labels would provide information regarding the performance of the subsets relative to the other subsets. Meanwhile, this would mean that the models trained in this thesis would likely never surpass, just approach the baseline models performance. As models produced in this work have shown performance close to \citeauthor{brautaset2020acoustic}, the results were judged to be adequate to formulate advice for the maximally informative subset of frequencies. Future work should investigate alternative \gls{kd} approaches, where a one is to change the threshold of 0.8 applied to create the hard mask for the pseudo labels. An ensemble of teachers models could also been used during training, for example using the baseline model and the traditional benchmark method applied by \citeauthor{brautaset2020acoustic}. Additionally, changes should be made to allocate all pixels to the background class, which was not assigned to the sandeel or other classes after the threshold. This would likely not change the results, as most pixels were allocated to a class. 

    %Furthermore, comparing the performance achieved in this thesis to the basis work should be done with some caution.
    
    
    
    
    %The objective of this task was not to train a better model, but assess which frequencies explain the performance achieved by the state-of-the-art model created by Brautaset et al. [1]. This use of pseudo labels were justified by the solid performance shown by the baseline model, but would mean that our models would likely never surpass, just approach their performance. As models produced in this work have shown performance close to Brautaset et al., the results were judged to be adequate to formulate advice for the maximally informative subset of frequencies. Future work should investigate the change in the results if the threshold of 0.8 applied to create the hard mask for the pseudo labels was altered. Additionally, changes should be made to allocate all pixels to the background class which were not assigned to the sandeel or other classes after the threshold. This would likely not change the results, as most pixels were allocated to a class.
    
    % Regioner
    % - mest sannsynelig bare eksponert for høy kvalitets data med labels.
    % - 
    
    % Hele ekkogram
    % - All info, uidentifiserte features. Var nok noen av disse i 2018, usett under trening.
    % - 
    
    
    There is likely some bias toward the frequencies used in the basis work. The features the additional two frequencies (\textit{70kHz and 333kHz}) used in this work may have contained were not included when training the basis model: thus, they played no part in forming the pseudo labels.  However, by viewing figure \ref{performance_trend_fig}, \textit{120kHz} can be interpreted as a frequency present in a high number of low-performing subsets. The performance trend was similar to \textit{70kHz} but worse than \textit{333kHz}. This suggests that the information found in \textit{120kHz} may also be found in \textit{70kHz} and \textit{333kHz}. The \textit{18kHz} had the highest trend in the same figure, but it was not present in a subset before a subset size of three in figure \ref{increasing_freq_f1_score_fig}, measuring max F1-score. This suggests that \textit{18kHz} has a positive synergy with many other frequencies but performs poorly in small subsets. Further work could look into removing the \textit{120kHz} frequency, rerun the experiments of \citeauthor{brautaset2020acoustic}, and observe the change in performance. Possibly discovering that their performance was reliant on the same unique subset (\textit{18kHz, 38kHz, and 200kHz}) found in this thesis. Additionally, the importance of the 18kHz frequency should be further investigated as this is a heavy transducer, which means that the unmanned vessels need to have the structural capacity to carry it.

    
    %Furthermore, the goal of this task was to find the best performing subsets of frequencies relative to the other subsets, not so much the \textit{true} performance of the subset when classifying sandeel.
    
    % The operator annotations belonging to the acoustic data were unavailable during this thesis; thus, the solution became the pseudo labels. This was justified by the solid performance shown by the model produced by \citeauthor{brautaset2020acoustic}, but would mean that our models would likely never surpass, just approach their performance. Furthermore, the goal of this task was to find the best performing subsets of frequencies relative to the other subsets, not so much the \textit{true} performance of the subset when classifying sandeel. As models produced in this work have shown performance close to \citeauthor{brautaset2020acoustic}, the results were judged to be adequate to formulate advice for the maximally informative subset of frequencies. Future work should investigate the change in the results if the threshold of 0.8 applied to create the hard mask for the pseudo labels was altered. Additionally, changes should be made to allocate all pixels to the background class which were not assigned to the sandeel or other classes after the threshold. This would likely not change the results, as most pixels were allocated to a class.
    


    Additionally, information about the range from the transducer in the crops evaluated by the model would likely increase performance. As acoustic backscattering from the same object can change with range, providing the model with additional context regarding the crop would likely provide a better foundation for handling this complexity. Range should be evaluated as a feature to include in future work when applying \gls{cnn}s to acoustic data crops. 

    
%    Interpretations: what do the results mean?
%    
%    Implications: why do the results matter?
%    
%    Limitations: what can’t the results tell us?
%    
%    Recommendations: what practical actions or scientific studies should follow?
%    
%
%     
%     This is something that can be introduced in future works.
%
%    \section{things}
%        \begin{itemize}
%            \item More exposure to data unseen by Bratuseth, but labels are most likely %wrong. 
%            \item data, probability scheme
%            \item hyperparameters for my work
%            \item problems introduces by pseudo labels and 
%            \item .zarr issue, not .mmemap? Utilize crimac pipeline
%            \item thresholding, sometimes all classes are 0, different threshold? Based og %Brautaset
%            \item model biased towards brautseth frequencies??
%            \item folder structure instead of regions?? - more samples
%            \item regrid, possible errors in the preprocessor -nope
%            \item supervised/ semi - supervised? 
%            \item other options for training, early stopping...
%            \item Lightweigth vessel, no operator annotations from trawl cathes. Viability?
%            \item No imputation of the missing values, as I only focused on the values above %the seafloor. - no
%            \item proportional increase/decrease in performance for each frequency %combination \item \citet{mohammed2006acoustic}, translation invariance kanskje %ikke så viktig???
%            \item residual connections??? \cite{zhang2018road}
%            \item plankton, top layer, false positive
%            \item Semi-supervised target classification in multi-frequency
%echosounder data - we assign the SE or OT class to the patch, where the num-
%ber of corresponding fish pixels is greater than or equal to 16 pixels
%which occupy 1.56% of the pixels in the patch. On the other hand,
%the patch without fish-annotated pixels is annotated to the BG class.
%        \end{itemize}
%
%    \section{Interpretations}
%    \section{Applied relevance}
%        things
%    
%    
%    \section{Further work}
%        - Apply the model to more data, to verify its generalization performance.
%